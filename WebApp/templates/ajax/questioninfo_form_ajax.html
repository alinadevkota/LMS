{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>

<body>
<form method="post" id="ajaxquestioninfoform">
    {% csrf_token %}
    <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
        {{ form.Question_Title|as_crispy_field }}
    </div>
    <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
        {{ form.Question_Score|as_crispy_field }}
    </div>
    <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
        <div id="div_id_Question_Description" class="form-group">
            <label for="id_Question_Description" class="control-label ">
                Question Description
            </label>
            <div class="controls ">
                    <textarea name="Question_Description" rows="1" cols="40" class="textarea form-control"
                              id="id_Question_Description"></textarea>
            </div>
        </div>
    </div>
    <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
        {{ form.Question_Media_File }}
    </div>

    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
        <input type="hidden" name="Lecture_Code" id="id_Lecture_Code" value="{{ Lecture_Code.id }}"
               class="select form-control">
    </div>
    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
        <input type="hidden" name="Chapter_No" id="id_Chapter_No" value="{{ Chapter_No.id }}"
               class="select form-control">
    </div>
    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
        <input type="hidden" name="Register_Agent" id="id_Register_Agent" value="{{ request.user.id }}"
               class="select form-control">
    </div>
    {#    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">#}
    {#        {{ form.Use_Flag }}#}
    {#    </div>#}
    <div class="submitButton  col-md-12">
        <button class="btn btn-success" type="submit">Submit</button>
    </div>
</form>
<script src=" {% static 'build/js/custom.js' %}"></script>
<script>
    $("#ajaxquestioninfoform").submit(function (e) {
        e.preventDefault(); // avoid to execute the actual submit of the form.
        $.ajax({
            url: "{% url 'questioninfo_create_ajax' %}",  // URL to your view that serves new info
            data: $(this).serialize(), // get the form data
            type: $(this).attr('method'), // GET or POST
            success: function (response) {
                {#var id_GroupMapping_Name = $('#id_GroupMapping_Name').val();#}
                $(".close-btn").click();
                {#$('#id_Groups').append(`#}
                {#    <option value="` + response.pk + `" selected>` + id_GroupMapping_Name + `</option>#}
                {#`);#}
            },
            error: function () {
                console.log('Error in posting group create form')
            }
        });
    });
</script>
